# å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ - å®Œå…¨ç‰ˆ

## âœ… ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- âœ… ãƒ”ãƒƒã‚¯ãƒ«ãƒœãƒ¼ãƒ«å‘ã‘ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆPWA
- âœ… ç‰‡æ‰‹ã§è©¦åˆè¨˜éŒ²
- âœ… QRã‚³ãƒ¼ãƒ‰ã§å¯¾æˆ¦ç›¸æ‰‹æ‹›å¾…
- âœ… ãƒˆãƒ¬ãƒ³ãƒ‰ç¢ºèª
- âœ… è©¦åˆå¾Œã‚ªãƒ—ã‚·ãƒ§ãƒ³å†™çœŸ
- âœ… ç®¡ç†è€…ï¼ˆYumiï¼‰ã¨æ¨™æº–ãƒ¦ãƒ¼ã‚¶ãƒ¼
- âœ… å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å†™çœŸã¾ãŸã¯æ±ºå®šè«–çš„ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤º

## âœ… èªè¨¼ & ãƒ­ãƒ¼ãƒ«
- âœ… ãƒã‚¸ãƒƒã‚¯ãƒªãƒ³ã‚¯ï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³ - `NextAuth.js` + `Resend`
- âœ… Googleã‚µã‚¤ãƒ³ã‚¤ãƒ³ - `NextAuth.js` Google Provider
- âœ… ãƒ­ãƒ¼ãƒ«: ç®¡ç†è€…ï¼ˆadminï¼‰ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆuserï¼‰
- âœ… ç®¡ç†è€…æ©Ÿèƒ½:
  - âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† (`/dashboard/admin/users`)
  - âœ… å¯¾æˆ¦ç›¸æ‰‹ç®¡ç† (`/dashboard/admin/opponents`)
  - âœ… **è©¦åˆç·¨é›†** (`/dashboard/admin/matches`) - æ–°è¦è¿½åŠ 
  - âœ… é‡è¤‡è§£æ±º (`/dashboard/admin/duplicates`)
  - âœ… æ‹›å¾…ç®¡ç† (`/dashboard/admin/invites`)
  - âœ… å†™çœŸç®¡ç† (`/dashboard/admin/photos`)

## âœ… å¯¾æˆ¦ç›¸æ‰‹
- âœ… åå‰å¿…é ˆã€ãƒ¡ãƒ¼ãƒ«ä»»æ„ - `app/dashboard/opponents/new/page.tsx`
- âœ… å†™çœŸä»»æ„ - `PhotoUploadModal.tsx`
- âœ… æ±ºå®šè«–çš„ã‚¢ãƒã‚¿ãƒ¼ï¼ˆDiceBear personasï¼‰ - `lib/avatar.ts`

## âœ… QRæ‹›å¾… & ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒªãƒ³ã‚¯
- âœ… ä¸€åº¦é™ã‚ŠQRã‚³ãƒ¼ãƒ‰è¡¨ç¤º - `app/dashboard/opponents/[id]/qr/page.tsx`
- âœ… ã‚¹ã‚­ãƒ£ãƒ³å¾Œãƒ¡ãƒ¼ãƒ«/Google SSOè¦æ±‚ - `app/invite/[token]/page.tsx`
- âœ… æ—¢å­˜ãƒ¡ãƒ¼ãƒ«ã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒªãƒ³ã‚¯ - `app/invite/[token]/complete/page.tsx`
- âœ… æ–°è¦ãƒ¡ãƒ¼ãƒ«ã¯æ–°ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ - `app/api/invite/complete/route.ts`
- âœ… ãƒªãƒ³ã‚¯ç¢ºèªã‚’æ˜ç¤º - `app/invite/[token]/page.tsx` (confirmation step)

## âœ… è©¦åˆãƒ­ã‚°ï¼ˆç‰‡æ‰‹æ“ä½œï¼‰
- âœ… ä¸‹éƒ¨ãƒãƒ¼: +1 A Â· Undo Â· +1 B Â· End game - `app/dashboard/match/new/MatchLogger.tsx`
- âœ… ãƒ—ãƒªã‚»ãƒƒãƒˆ: 11/15/21ãƒã‚¤ãƒ³ãƒˆ - `MatchLogger.tsx` line 138-178
- âœ… 2ãƒã‚¤ãƒ³ãƒˆå·®ã§å‹åˆ©ãƒ«ãƒ¼ãƒ« - `calculateWinner()` function
- âœ… è©¦åˆå¾Œå†™çœŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ - `app/dashboard/match/[id]/photo/page.tsx`
- âœ… å¾Œã‹ã‚‰è¿½åŠ å¯èƒ½ - "Add Photo" link on match details
- âœ… è©¦åˆè©³ç´°ã«è¡¨ç¤º - `app/dashboard/match/[id]/page.tsx`

## âœ… çµ±è¨ˆ
- âœ… ç°¡æ˜“ELOæ›´æ–° - `lib/elo.ts` + match completion flow
- âœ… å‹ç‡æ¨ç§»ãƒãƒ£ãƒ¼ãƒˆ - `app/dashboard/stats/WinRateChart.tsx`
- âœ… ELOæ¨ç§»ãƒãƒ£ãƒ¼ãƒˆ - `app/dashboard/stats/EloChart.tsx`
- âœ… å¯¾æˆ¦æˆç¸¾ï¼ˆHead-to-Headï¼‰ - `app/dashboard/stats/HeadToHeadStats.tsx`

## âœ… PWAæ©Ÿèƒ½
- âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ - `next.config.js` with `next-pwa`
- âœ… è©¦åˆä¸­ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ - localStorage in `MatchLogger.tsx`
- âœ… å¯¾æˆ¦ç›¸æ‰‹æƒ…å ±ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ - `OpponentsCache.tsx`
- âœ… ã€Œå‰å›ã®è©¦åˆã‚’å†é–‹ã€ãƒãƒŠãƒ¼ - `app/dashboard/ResumeMatchBanner.tsx`
- âœ… Manifestè¨­å®š - `public/manifest.json`
- âœ… Service Worker - auto-generated by next-pwa
- âš ï¸ ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆå¾…ã¡ - `public/generate-icons.html` ã§ä½œæˆå¯èƒ½

## âœ… ã‚¢ãƒã‚¿ãƒ¼
- âœ… å††å½¢ã‚¢ãƒã‚¿ãƒ¼å…¨å“¡è¡¨ç¤º - `Avatar.tsx` component
- âœ… å†™çœŸãŒã‚ã‚Œã°ä½¿ç”¨ - `photo_url` field
- âœ… æ±ºå®šè«–çš„ã‚¢ãƒã‚¿ãƒ¼ - DiceBear personas with email/ID as seed
- âœ… å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«: `lib/avatar.ts`

## âœ… ãƒ­ãƒ¼ãƒ« & ä¿è­·æ©Ÿèƒ½
### ç®¡ç†è€…æ¨©é™
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† - `/dashboard/admin/users`
- âœ… å¯¾æˆ¦ç›¸æ‰‹ç®¡ç† - `/dashboard/admin/opponents`
- âœ… **è©¦åˆç·¨é›†ãƒ»å‰Šé™¤** - `/dashboard/admin/matches` (æ–°è¦è¿½åŠ )
- âœ… é‡è¤‡çµ±åˆ - `/dashboard/admin/duplicates`
- âœ… æ‹›å¾…ç„¡åŠ¹åŒ– - `/dashboard/admin/invites`
- âœ… å†™çœŸç®¡ç† - `/dashboard/admin/photos`

### ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™
- âœ… è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« - `/dashboard/profile`
- âœ… ä½œæˆã—ãŸå¯¾æˆ¦ç›¸æ‰‹ - ownership checks in API routes
- âœ… è©¦åˆç®¡ç† - can only manage own matches

### ã‚µãƒ¼ãƒãƒ¼å´ä¿è­·
- âœ… æ¨©é™ãƒã‚§ãƒƒã‚¯ - `lib/auth-guards.ts` (`requireAuth`, `requireAdmin`)
- âœ… æ‰€æœ‰æ¨©ãƒã‚§ãƒƒã‚¯ - API routes verify `created_by_user_id`
- âœ… ãƒ¬ãƒ¼ãƒˆåˆ¶é™ - `lib/rate-limit.ts`
  - âœ… æ‹›å¾…ä½œæˆ: 5 requests / 15åˆ†
  - âœ… å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: 10 requests / 15åˆ†
  - âœ… è©¦åˆä½œæˆ: 20 requests / 15åˆ†

### QRãƒ•ãƒ­ãƒ¼ç¢ºèª
- âœ… ãƒªãƒ³ã‚¯å…ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ˜ç¤º - `app/invite/[token]/page.tsx`
- âœ… ç¢ºèªã‚¹ãƒ†ãƒƒãƒ—ã‚ã‚Š - "Link to my account" button

## âœ… ãƒ¢ãƒã‚¤ãƒ«UX
- âœ… ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆ â‰¥56px - all buttons in `MatchLogger.tsx`
- âœ… é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ - improved button styling with shadows
- âœ… è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ - `hapticFeedback()` in `MatchLogger.tsx`
- âœ… ã‚«ãƒ¡ãƒ©å„ªå…ˆãƒ•ãƒ­ãƒ¼:
  - âœ… ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ - camera capture="user"
  - âœ… å¯¾æˆ¦ç›¸æ‰‹å†™çœŸ - camera with capture
  - âœ… è©¦åˆå¾Œå†™çœŸ - camera capture="environment"
- âœ… ã‚³ãƒ¼ãƒˆä¸Šå…¥åŠ›æœ€å°åŒ– - simple +1/Undo buttons only
- âœ… è©¦åˆçµ‚äº†ç¢ºèª - modal confirmation before saving

## âœ… ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œ
- âœ… ãƒ¡ãƒ¼ãƒ«ç«¶åˆ â†’ `/auth/error` page with admin contact
- âœ… æ‹›å¾…æœŸé™åˆ‡ã‚Œ â†’ `/invite/[token]` shows expiry message + admin contact
- âœ… Google SSOãƒ¡ãƒ¼ãƒ«ä¸ä¸€è‡´ â†’ shows which account will be linked
- âœ… é‡è¤‡å¯¾æˆ¦ç›¸æ‰‹ â†’ admin merge tool (`/dashboard/admin/duplicates`)
- âœ… å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•—:
  - âœ… ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - âœ… ã€Œè©¦åˆãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜æ¸ˆã¿ã€reassurance
  - âœ… å¾Œã§å†è©¦è¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³

## âœ… æ¨å¥¨æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- âœ… Vercel Hobby - deployment target
- âœ… Next.js 16 - `package.json` confirms App Router
- âœ… Route Handlers - `/app/api/**/*.ts`
- âœ… Server Actions - used in forms
- âœ… NextAuth.js - `app/api/auth/[...nextauth]/route.ts`
- âœ… Email provider - Resend integration
- âœ… Google provider - OAuth configured
- âœ… JWT sessions - `session: { strategy: "jwt" }`
- âœ… ã‚µãƒ¼ãƒãƒ¼å´ã‚¬ãƒ¼ãƒ‰ - `lib/auth-guards.ts`
- âœ… Vercel Postgres (Neon) - `@vercel/postgres`
- âœ… Vercel Blob - `@vercel/blob`
- âœ… DiceBear (Identicon) - `@dicebear/core`, `@dicebear/personas`
- âœ… Recharts - `recharts` package
- âœ… Tailwind CSS - `tailwind.config.ts`
- âœ… next-pwa - PWA support
- âœ… qrcode.react - QR code generation
- âœ… Resend - email sending
- âœ… **Vercel Cron** - `vercel.json` cron config (æ–°è¦è¿½åŠ )

## âœ… å—ã‘å…¥ã‚Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
1. âœ… å¯¾æˆ¦ç›¸æ‰‹ä½œæˆ: åå‰å¿…é ˆã€ãƒ¡ãƒ¼ãƒ«/å†™çœŸä»»æ„
   - File: `app/dashboard/opponents/new/page.tsx`
   
2. âœ… QRãƒ•ãƒ­ãƒ¼: ã‚¹ã‚­ãƒ£ãƒ³ â†’ ãƒ¡ãƒ¼ãƒ«/Google â†’ æ—¢å­˜ãƒªãƒ³ã‚¯ or æ–°è¦ä½œæˆ
   - Files: 
     - `app/dashboard/opponents/[id]/qr/page.tsx`
     - `app/invite/[token]/page.tsx`
     - `app/invite/[token]/complete/page.tsx`
   
3. âœ… ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å…¨å“¡ã«å†™çœŸã¾ãŸã¯æ±ºå®šè«–çš„ã‚¢ãƒã‚¿ãƒ¼
   - Files: 
     - `components/Avatar.tsx`
     - `lib/avatar.ts`
   
4. âœ… ç‰‡æ‰‹ã‚¹ã‚³ã‚¢æ“ä½œãŒãƒ¢ãƒã‚¤ãƒ«ã§å¿«é©
   - File: `app/dashboard/match/new/MatchLogger.tsx`
   - Features: Large buttons (â‰¥56px), haptic feedback, bottom bar layout
   
5. âœ… ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ELO + åŸºæœ¬ãƒãƒ£ãƒ¼ãƒˆ
   - File: `app/dashboard/stats/page.tsx`
   - Charts: EloChart, WinRateChart, HeadToHeadStats
   
6. âœ… è©¦åˆå¾Œå†™çœŸã¯ä»»æ„ã€å¾Œã‹ã‚‰è¿½åŠ ã€è©¦åˆè©³ç´°ã«è¡¨ç¤º
   - Files:
     - `app/dashboard/match/[id]/photo/page.tsx` (post-match upload)
     - `app/dashboard/match/[id]/page.tsx` (shows photo in details)
   
7. âœ… PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã€è©¦åˆä¸­ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
   - Files:
     - `next.config.js` (next-pwa config)
     - `public/manifest.json`
     - `app/dashboard/match/new/MatchLogger.tsx` (localStorage)
     - `app/dashboard/opponents/OpponentsCache.tsx` (offline cache)

## ğŸ†• æœ€æ–°è¿½åŠ æ©Ÿèƒ½

### è©¦åˆç·¨é›†ãƒ»å‰Šé™¤ï¼ˆç®¡ç†è€…ï¼‰
- âœ… `/dashboard/admin/matches` - å…¨è©¦åˆè¡¨ç¤º
- âœ… ã‚¹ã‚³ã‚¢ç·¨é›†æ©Ÿèƒ½ - å‹è€…è‡ªå‹•å†è¨ˆç®—
- âœ… è©¦åˆå‰Šé™¤æ©Ÿèƒ½ - ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ä»˜ã
- âœ… API: `GET/PATCH/DELETE /api/admin/matches`
- âœ… DBé–¢æ•°: `getAllMatches()`, `updateMatchScores()`, `deleteMatch()`

### ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆVercel Cronï¼‰
- âœ… `vercel.json` - cronè¨­å®š
- âœ… `/api/cron/cleanup-invites` - æ¯æ—¥00:00 UTCå®Ÿè¡Œ
- âœ… 7æ—¥ä»¥ä¸Šå‰ã«æœŸé™åˆ‡ã‚Œã®æ‹›å¾…ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤
- âœ… CRON_SECRETç’°å¢ƒå¤‰æ•°ã§ä¿è­·
- âœ… DBé–¢æ•°: `deleteExpiredInvites()`

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- âœ… `docs/ADMIN-FEATURES.md` - ç®¡ç†è€…æ©Ÿèƒ½ä¸€è¦§ï¼ˆæ›´æ–°æ¸ˆã¿ï¼‰
- âœ… `docs/PWA-FEATURES.md` - PWAæ©Ÿèƒ½è©³ç´°
- âœ… `docs/SECURITY-FEATURES.md` - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
- âœ… `docs/EDGE-CASES.md` - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œ
- âœ… `docs/CRON-JOBS.md` - Cronã‚¸ãƒ§ãƒ–è¨­å®šï¼ˆæ–°è¦ï¼‰
- âœ… `docs/ADMIN-MATCH-MANAGEMENT.md` - è©¦åˆç®¡ç†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆæ–°è¦ï¼‰
- âœ… `docs/SETUP.md` - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ï¼ˆæ–°è¦ï¼‰
- âœ… `docs/ROLES.md` - ãƒ­ãƒ¼ãƒ«èª¬æ˜
- âœ… `docs/INVITE-LINKING-FLOW.md` - æ‹›å¾…ãƒ•ãƒ­ãƒ¼
- âœ… `docs/ROLE-SYSTEM-FLOW.md` - ãƒ­ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ 

## âš ï¸ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ç¢ºèªäº‹é …

### ç’°å¢ƒå¤‰æ•°è¨­å®š
- [ ] `CRON_SECRET` - Vercelç’°å¢ƒå¤‰æ•°ã«è¿½åŠ å¿…è¦
- [ ] ãã®ä»–ã®env varsã¯æ—¢å­˜ï¼ˆ`.env.example`å‚ç…§ï¼‰

### PWAã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆ
- [ ] `public/icon-192.png` - ç”Ÿæˆå¿…è¦
- [ ] `public/icon-512.png` - ç”Ÿæˆå¿…è¦
- æ–¹æ³•: `public/generate-icons.html` ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### Vercelè¨­å®š
- [ ] Cron jobsãŒè‡ªå‹•è¨­å®šã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ã§PWAãŒæ­£å¸¸å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

## âœ… å®Œäº†çŠ¶æ³: 100%

å…¨ã¦ã®å¿…é ˆæ©Ÿèƒ½ãŒå®Ÿè£…æ¸ˆã¿ã§ã™ï¼

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ•°
- API Routes: 25+
- Page Components: 30+
- Shared Components: 15+
- Database Functions: 50+
- Admin Features: 7
- Cron Jobs: 1

### ãƒ†ã‚¹ãƒˆæ¨å¥¨é …ç›®
1. ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ â†’ è©¦åˆç·¨é›†/å‰Šé™¤ã‚’ãƒ†ã‚¹ãƒˆ
2. å¯¾æˆ¦ç›¸æ‰‹ã‚’ä½œæˆ â†’ QRæ‹›å¾… â†’ åˆ¥ãƒ‡ãƒã‚¤ã‚¹ã§ã‚¹ã‚­ãƒ£ãƒ³
3. è©¦åˆã‚’è¨˜éŒ² â†’ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§æ›´æ–°ã‚’ç¶šã‘ã‚‹ â†’ å†é–‹ãƒãƒŠãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ
4. PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« â†’ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§è©¦åˆã‚’é–‹å§‹
5. å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ â†’ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ã‚ªãƒ•ã«ã—ã¦å¤±æ•—ã‚’ç¢ºèª
6. ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ å„ç¨®ç®¡ç†æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ

